```
 â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
 â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘
 â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•    â•šâ•â•â•â•   â•šâ•â• â•šâ•â•     â•šâ•â• â•šâ•â•  â•šâ•â• â•šâ•â•  â•šâ•â• â•šâ•â•
```

**Vim-style keyboard navigation for Safari.**

A Safari Web Extension that brings Vim keybindings to your browser â€” scroll, navigate, manage tabs, search, and follow links, all from the keyboard.

## Keybindings

| Key             | Action                                |
| --------------- | ------------------------------------- |
| `h` `j` `k` `l` | Scroll left / down / up / right       |
| `d` / `u`       | Half-page down / up                   |
| `gg` / `G`      | Top / bottom of page                  |
| `f` / `F`       | Link hints (current tab / new tab)    |
| `/`             | Search page                           |
| `n` / `N`       | Next / previous search match          |
| `H` / `L`       | History back / forward                |
| `J` / `K`       | Previous / next tab                   |
| `r`             | Reload page                           |
| `x` / `X`       | Close tab / restore closed tab        |
| `t` / `T`       | New tab / duplicate tab               |
| `i`             | Enter insert mode (pass keys to page) |
| `Escape`        | Return to normal mode                 |

All keybindings are fully configurable and can be individually enabled/disabled via the settings popup.

## Settings

Click the Neovimari icon in the Safari toolbar to open the settings popup.

- **Enable/disable actions** â€” toggle individual actions or entire groups (Scrolling, Navigation, Search, Tabs, History, Other)
- **Remap keybindings** â€” click any key badge and press the new key sequence
- **General settings** â€” scroll step size, smooth scroll, half-page fraction, scroll duration, hint characters
- **Excluded URLs** â€” add glob patterns (e.g. `*mail.google.com*`) to disable Neovimari on specific sites
- **Reset to defaults** â€” restore all settings to their original values

The popup automatically adapts to your system light/dark mode.

## Setup

### Prerequisites

- Node.js 20+
- Xcode 15+
- Safari 17+ with developer mode enabled

### Build

```bash
npm install
npm run build
```

### Run in Safari

1. Open `xcode/Neovimari/Neovimari.xcodeproj` in Xcode
2. Create `xcode/Neovimari/Local.xcconfig` with your team ID:
   ```
   DEVELOPMENT_TEAM = YOUR_TEAM_ID
   ```
3. Build & Run (Cmd+R)
4. In Safari â†’ Settings â†’ Extensions â†’ enable Neovimari
5. Allow permissions when prompted

> **Note:** Enable **Safari â†’ Settings â†’ Developer â†’ Allow unsigned extensions** (resets each Safari launch).

### Development

```bash
npm run dev       # Watch mode (rebuilds on change)
npm run check     # TypeScript type check
npm run test      # Run tests
npm run lint      # ESLint
```

After rebuilding, hit Cmd+R in Xcode and reload the page in Safari.

## Architecture

- **Content script** â€” injected into every page; captures keyboard input, manages modal state, renders link hints and search UI via Shadow DOM
- **Background service worker** â€” handles tab management and persists settings via `browser.storage.local`
- **Popup** â€” settings UI for configuring keybindings, toggling actions, and managing excluded URLs
- **Swift companion app** â€” minimal macOS wrapper required by Apple to host the Safari Web Extension

## Inspired by

- [Vimari](https://github.com/televator-apps/vimari) â€” the original Vim keybindings for Safari
- [Vimium](https://github.com/philc/vimium) â€” Vim keybindings for Chrome

## License

[MIT](LICENSE)

---

ðŸ¤– Built in collaboration with [Claude](https://claude.ai).
